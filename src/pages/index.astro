---
// @ts-nocheck

import HtmlLayout from '@/layouts/HtmlLayout.astro';
import MainLayout from '@/layouts/MainLayout.astro';
import TextField from '@/components/form/TextField.vue';
import Button from '@/components/button/Button.vue';
import CharacterIntro from '@/components/animation/CharacterIntro.vue';

const titleStyle =
	'text-5xl text-blue-300 text-center leading-[1.3] font-[Recipekorea] drop-shadow-[2px_2px_0px_rgb(22,135,245)] break-keep';
const mobileTitleStyle = 'max-md:text-4xl [&&]:max-[375px]:text-3xl';

const descriptionStyle = 'text-2xl text-center leading-[1.2] mt-4 break-keep';
const mobileDescriptionStyle = 'max-md:text-xl [&&]:max-[375px]:text-lg';

const boxStyle = 'flex flex-col gap-y-6 w-full max-w-[300px] ';

const textFieldStyle = 'min-w-[230px] max-w-[230px]';
---

<HtmlLayout bodyClassName="bg-sky-50">
	<MainLayout>
		<div>
			<h1 class={`${titleStyle} ${mobileTitleStyle}`}>
				카트라이더 캐릭터로 알아보는 <br /> 성격 테스트
			</h1>
			<p class={`${descriptionStyle} ${mobileDescriptionStyle}`}>
				나는 어떤 캐릭터와 같은 성격일까?
			</p>
		</div>

		<CharacterIntro client:load />

		<div class={boxStyle}>
			<div class="flex flex-col gap-y-1 mx-auto">
				<TextField
					id="nameInput"
					width={`${textFieldStyle}`}
					maxLength={10}
					align="center"
					placeholder="이름을 입력해주세요."
				/>
				<p class="text-xs text-center text-gray-500">*이름은 최대 10글자까지만 설정 가능해요.</p>
			</div>

			<Button bindClass="start-button max-md:h-10" styleType="fill-blue-md">테스트 시작하기</Button>
		</div>
	</MainLayout>
</HtmlLayout>

<script>
	// @ts-nocheck

	const startButton = document.querySelector('.start-button');
	const nameInput = document.querySelector('#nameInput');

	startButton.addEventListener('click', () => {
		const name = nameInput.value.trim();

		if (!name) {
			alert('먼저 이름을 입력해주세요');
			return;
		}

		// 로컬스토리지에 이름 저장
		localStorage.setItem('userName', name);

		// 페이지 이동
		window.location.href = '/question';
	});
</script>
